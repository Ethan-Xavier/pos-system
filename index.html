<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Offline POS Tracker</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f4f4f4;padding:20px;display:flex;flex-direction:column;align-items:center;gap:12px}
.order-box{background:#0062ca;padding:18px;border-radius:12px;color:#fff;width:360px;box-shadow:0 8px 24px rgba(0,0,0,.12)}
.order-box h2{text-align:center;margin:0 0 12px;font-size:18px}
input,select{width:100%;padding:9px;margin:6px 0;border-radius:8px;border:none;font-size:15px;outline:none}
.add-btn{background:#28a745;color:#fff;border-radius:8px;padding:10px;font-weight:700;cursor:pointer;border:none;width:100%}
.orders-container{width:100%;max-width:380px;display:flex;flex-direction:column;gap:10px;margin-top:20px}
.order-item{background:#fff;padding:10px;border-radius:10px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px rgba(0,0,0,.1)}
button.small{padding:5px 8px;border-radius:6px;border:none;cursor:pointer;background:#dc3545;color:#fff;margin-left:6px}
button.served-btn{background:#28a745;color:#fff}
</style>
</head>
<body>

<div class="order-box">
<h2><i class="fas fa-utensils"></i> Offline POS</h2>
<label>Type</label>
<select id="typeSelect">
  <option value="" disabled selected>Select type</option>
  <option value="food">Food</option>
  <option value="drink">Drink</option>
</select>
<label>Item</label>
<select id="itemSelect"><option value="" disabled selected>Select item</option></select>
<label>Quantity</label>
<input type="number" id="quantity" min="1" value="1">
<button id="addItemBtn" class="add-btn"><i class="fas fa-plus"></i> Add Order</button>
</div>

<div id="ordersContainer" class="orders-container"></div>

<script>
const menuItems = {
  food: [{item:'Pizza',price:500},{item:'Pasta',price:300},{item:'Burger',price:200}],
  drink: [{item:'Soda',price:50},{item:'Juice',price:80},{item:'Water',price:30}]
};

const typeSelect = document.getElementById('typeSelect');
const itemSelect = document.getElementById('itemSelect');
const quantityInput = document.getElementById('quantity');
const addItemBtn = document.getElementById('addItemBtn');
const ordersContainer = document.getElementById('ordersContainer');

let orders = [];
let closedTables = []; // orders that have been served

typeSelect.addEventListener('change',()=>{
  itemSelect.innerHTML='<option value="" disabled selected>Select item</option>';
  (menuItems[typeSelect.value]||[]).forEach(m=>{
    const opt=document.createElement('option');
    opt.value=m.item; opt.textContent=m.item;
    itemSelect.appendChild(opt);
  });
});

function logOrders(){
  console.clear();
  console.log('Open Orders:');
  console.table(orders.map(o=>({
    type: o.type,
    item: o.item,
    quantity: o.quantity,
    total: o.price*o.quantity,
    time: o.time
  })));
  console.log('Served Orders:');
  console.table(closedTables.map(o=>({
    type: o.type,
    item: o.item,
    quantity: o.quantity,
    total: o.price*o.quantity,
    time: o.time
  })));
}

function renderOrders(){
  ordersContainer.innerHTML='';
  orders.forEach((o,index)=>{
    const div=document.createElement('div');
    div.className='order-item';
    div.innerHTML=`<div>${o.type}: ${o.item} x${o.quantity} - ${o.price*o.quantity} mts</div>
                   <div>
                     <button class="small">Cancel</button>
                     <button class="served-btn">Served</button>
                   </div>`;
    
    div.querySelector('.small').onclick=()=>{
      orders.splice(index,1);
      renderOrders();
      logOrders();
    };
    div.querySelector('.served-btn').onclick=()=>{
      const servedOrder = orders.splice(index,1)[0];
      closedTables.push(servedOrder);
      renderOrders();
      logOrders();
    };

    ordersContainer.appendChild(div);
  });
}

addItemBtn.addEventListener('click',()=>{
  const type = typeSelect.value;
  const item = itemSelect.value;
  const qty = parseInt(quantityInput.value)||1;
  const price = (menuItems[type]||[]).find(m=>m.item===item)?.price;
  if(!type || !item || !price){ alert('Select type and item'); return; }

  const newOrder = {id:'ORDER-'+Date.now(), type, item, quantity:qty, price, time:new Date().toISOString()};
  orders.push(newOrder);
  quantityInput.value=1;
  renderOrders();
  logOrders();
});
</script>

</body>
</html>
